Windows エクスプローラ統合
==========================

.. module:: explorer
	:synopsis: Windows エクスプローラへの統合

アイコンオーバーレイ
--------------------

TortoiseHg は Windows エクスプローラのアイコンオーバーレイを通じてファイル状態の
視覚的に表示します。これは TortoiseCVS や TortoiseSVN といった他の Tortoise
クライアントのそれと似た機能です。

TortoiseHg は TortoiseOverlays (TortoiseSVN チームによるプロジェクト)
を利用することでアイコンオーバーレイを TortoiseSVN (バージョン 1.5 系以降)
や他の "Tortoise" プロジェクトと共有します。

.. figure:: figures/overlayicons.png
	:alt: アイコンオーバーレイ

	:menuselection:`表示 --> アイコン` で表示したアイコンオーバーレイ (Windows XP)

右クリックメニューには :guilabel:`アイコンの更新` メニューが用意されており、
強制的に現在表示しているリポジトリまたはディレクトリのアイコンを最新の状態に
更新できます。更新中はタスクバーアイコンが緑色になり、ディレクトリのアイコンオーバーレイは
「？」マークが表示されます。

新しい C++ によるシェル拡張は従来の Python による実装よりも1桁実行速度が
速くなりましたが、タスクバーアイコンのメニューからアイコンオーバーレイの
設定が可能です。システムトレイにある Mercurial のアイコン (銀色の水滴)
をクリックして :guilabel:`Options` を選択してください。
表示された設定ダイアログでアイコンオーバーレイを無効にしたり、ローカルディスクのみ
有効にすることができます。

.. figure:: figures/taskbarui.png
	:alt: タスクバー設定ダイアログ

	タスクバー設定ダイアログ

バージョン 0.8.1 では特定のリポジトリのみアイコンオーバーレイを無効にすることが
可能になりました。リポジトリの :file:`.hg\\thgstatus` ファイルを開いて中身を： ::

	@@noicons

の1行のみに置き換えることで無効にできます。


右クリックメニュー
------------------

TortoiseHg コマンド (GUI ウィンドウとダイアログ) はエクスプローラの
右クリックメニューから起動します。TortoiseHg の右クリックメニューはコンテキスト、
つまりどのようなディレクトリやファイルを選択しているかといった状況に応じて
変化します。例えば次のスクリーンショットは Mercurial 管理下にあるディレクトリの
右クリックメニューです：

.. figure:: figures/cmenu-nofiles.png
	:alt: 右クリックメニュー

	Mercurial 管理下にあるディレクトリの右クリックメニュー

そしてこれはファイルまたはディレクトリを選択した状態で開いた右クリックメニューです：

.. figure:: figures/cmenu-files.png
	:alt: 右クリックメニュー

	ファイルまたはディレクトリを選択した状態で開いた右クリックメニュー

TortoiseHg は普段よく使う Mercurial コマンドに対応したダイアログを提供します。
滅多に使わないコマンドや、比較的最近追加されたコマンドについては :file:`cmd.exe`
など、コマンドライン (CLI) からアクセスする必要があります。

右クリックメニューはタスクバー設定ダイアログから設定可能です。システムトレイにある 
Mercurial のアイコン (銀色の水滴) をクリックして :guilabel:`Options` を
選択してください。表示された設定ダイアログで各コマンドを個別にトップレベルの
メニューとして表示できます。


Nautilus
--------

TortoiseHg は nautilus-python プラグインを利用して GNOME デスクトップ環境の
シェルとの統合も提供しています。頒布パッケージから TortoiseHg をインストールした
場合はこの拡張機能も既に設定済みです。そうでない場合は Wiki を参考にしてください。

Nautilus 拡張機能のアイコンオーバーレイや右クリックメニューを設定するための GUI
が用意されるまでの間は、 :file:`~/.hgrc` ファイルを編集することでメニュー項目を
トップに持ってくる設定のみ可能です。以下の設定を追加してください::

	[tortoisehg]
	promoteditems = commit, log, synch

.. figure:: figures/nautilus.png
	:alt: Nautilus スクリーンショット

	GNOME/Nautilus スクリーンショット

.. vim: noet ts=4
