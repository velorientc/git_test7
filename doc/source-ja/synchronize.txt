同期ツール
==========

.. module:: synchronize.dialog
	:synopsis: Dialog used to perform synchronization operations

.. figure:: figures/synchronize.png
	:alt: 同期ダイアログ

	同期ダイアログ

同期ツールはリポジトリ間でチェンジセットを転送したり、メールを送信するのに使います。

	:guilabel:`受信`
		指定したリポジトリからプルされるチェンジセットを表示します。
		それらはローカルのリポジトリにはなく、指定したリポジトリにあるチェンジセットです。
	:guilabel:`プル`
		チェンジセットを指定したリポジトリからプルします
	:guilabel:`送信`
		指定したリポジトリにプッシュするチェンジセットを表示します。
		それらはローカルにあって、指定したリポジトリにはないチェンジセットです。
	:guilabel:`プッシュ`
		チェンジセットを指定したリポジトリにプッシュします。その結果、
		ローカルにおける *tip* リビジョンが指定したリポジトリの新しい *tip* リビジョンになります。
	:guilabel:`メール送信`
		指定したリポジトリへのチェンジセットをメールとして送信します
	:guilabel:`中止`
		現在の操作を中止します
	:guilabel:`設定`
		リポジトリパス (とそのエイリアス) の設定ダイアログを開きます

ツールバーの下のボタンはそれぞれ：

	:guilabel:`リポジトリ:`
		同期に使用するローカルリポジトリを指定します
	:guilabel:`バンドル:`
		プルの対象となるローカルのバンドルファイルを指定します

その隣のコンボボックスには同期の対象となるリポジトリのパスを入力または選択します。
ドロップダウンリストにはこのリポジトリに設定されているパスのエイリアスが表示されます。

:guilabel:`プル後の処理` のフレームにはプル操作が完了した後に実行する処理を選択する
ラジオボタンがあります。この動作はツールバーの :guilabel:`設定` ボタンから変更可能です。
グローバル設定を上書きすることでリポジトリごとにデフォルトの動作を設定できます。

	:guilabel:`なし`
		プル後に何もしません。
		No operations are performed after a pull.  You will be allowed to
		view the pulled changesets in the log viewer, and you will have the
		option to update to the new tip if applicable.
	:guilabel:`更新`
		ローカルリポジトリに新しいリビジョンがプルされた場合に自動的にブランチの *tip*
		リビジョンに更新します。これによってプルした変更とローカルのまだコミットされていない
		変更が衝突した場合にマージが発生する可能性があります。
	:guilabel:`取得`
		:command:`hg fetch` と同じ操作になります。動作の詳細については fetch 拡張機能の
		ヘルプを参照してください。
	:guilabel:`リベース`
		:command:`hg pull --rebase` と同じ操作になります。動作の詳細については
		rebase 拡張機能のヘルプを参照してください。
		リベース操作はリポジトリオブジェクトを保有するツールへの破壊的な操作となるため、
		チェンジログビューアとの連携動作を無効にします。

:guilabel:`プロキシサーバを使用する` チェックボックスは同期操作ごとに
プロキシサーバの設定を無効化するのに便利です。
このボタンはプロキシ設定がされている場合にのみ有効になります。

全ての同期操作はユーザからの入力を促すダイアログによる認証を必要とします。
TortoiseHg は *ssh:* 接続とその認証のために TortoisePlink ツール (TortoiseSVN からの提供)
を使用します。SSH サーバへの接続に問題がある場合は FAQ_ を参考にしてみてください。

.. _FAQ: http://bitbucket.org/tortoisehg/stable/wiki/FAQ#tortoisehg-faq

折り畳める :guilabel:`詳細設定` パネルにはプル・プッシュ操作に関連した設定が
いくつか用意されています：

	:guilabel:`強制的にプッシュ/プルする`
		無関係なリポジトリまたは複数のヘッドがあるなどの警告を無視して実行します
	:guilabel:`対象リビジョン`
		全てのリビジョンを送らないようにします
	:guilabel:`リモートコマンド`
		-e オプションを使います
	:guilabel:`パッチの表示`
		チェンジセット送受信時の差分を表示します
	:guilabel:`最新のものを最初に表示`
		チェンジセットを逆順に表示します
	:guilabel:`マージリビジョン以外を表示`
		結果表示からマージリビジョンを除外します (プッシュ・プル操作に影響はありません)


プルした後
----------

After changesets are pulled into your repository, two buttons may appear
at the bottom of the dialog:

	:guilabel:`View pulled changesets`
		Open the changelog viewer and inspect pulled changesets
	:guilabel:`Update to tip`
		Update your working directory to the new tip

Either button may be hidden if it is not applicable.


メール送信
----------

.. figure:: figures//email.png
	:alt: Email dialog

	Email dialog
 
The email dialog can be launched from two TortoiseHg tools.

1) The changelog tool, in which case the user intends to email a single
   revision or a range of revisions.

2) The synchronize tool, in which case the user intends to email all
   outgoing changes to the current target repository (it's good practice to
   check the outgoing changes before launching the email dialog).

The :guilabel:`Send` button is obvious, and the :guilabel:`Configure`
dialog predictably opens the TortoiseHg Settings dialog to the email tab
where you can configure your SMTP settings and set default
:guilabel:`To:` and :guilabel:`From:` addresses.

:guilabel:`In-Reply-To:` is used to make your patches properly threaded
in mailing lists.

Please consult the Mercurial documentation for the differences between
plain patches, HG patches, Git patches, and bundles.


コマンドラインからの実行
------------------------

同期ツールはコマンドラインから起動することもできます： ::

	hgtk synch

	aliases: pull, push, incoming, outgoing, email

	repository synchronization tool

	use "hgtk -v help synch" to show global options

The syntax is simple, no options or parameters are needed, except the
global options.  If the synchronize tool is started via push, outgoing,
or email command aliases, it will automatically select the
*default-push* URL if.  For all other aliases the tool selects the
*default* URL.  If the selected URL is not found, it will use the first
path it finds.

0.7 からの変更点
----------------

* Path drop-down list no longer includes most-recently-used paths.  It
  only includes configured repository paths.
* Email dialog now has buttons for configuring in-reply-to tags and the
  attachment types.
* Email dialog now sends an intro message only when one has been
  entered, regardless of patch count.

.. vim: noet ts=4
