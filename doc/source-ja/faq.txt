************
よくある質問
************

*TortoiseHg って何？*

	Mercurial 分散構成管理システムのための Windows シェル拡張です。Subversion
	における TortoiseSVN や、CVS における TortoiseCVS のような
	クライアントアプリケーションです。TortoiseHg は他のプラットフォーム向けに
	コマンドラインから起動するための hgtk スクリプトも含んでいます。

*Windows 向けの TortoiseHg インストーラには何が含まれていますか？*

	`Mercurial <http://mercurial.selenic.com/wiki/>`_,
	`kdiff3 <http://kdiff3.sourceforge.net/>`_,
	`TortoisePlink <http://www.chiark.greenend.org.uk/%7Esgtatham/putty/>`_,
	に加えて5つの拡張機能: hgfold、hgcr-gui、perfarce、hgeol、mercurial-keyring
	を同梱しています。

*Windows 上の Mercurial はインデックスサービスやアンチウイルスソフトウェアと競合しませんか？*

	競合する可能性があります。
	`TortoiseSVN <http://www.selenic.com/pipermail/mercurial/2010-January/029680.html>`_
	と同様、リポジトリとその作業コピーのディレクトリではインデックスサービスを無効にし、
	アンチウイルスソフトウェアのスキャン対象外に指定してください。

*エクスプローラの右クリックメニューは翻訳されませんか？*

	右クリックメニューの翻訳ファイルは TortoiseHg のインストールディレクトリ
	:file:`C:\\Program Files\\TortoiseHg\\cmenu_i18n` にあります。
	使用したい言語の Windows レジストリファイルをダブルクリックして、
	表示される確認ダイアログの指示に従ってインストールしてください。

*TortoiseHg ダイアログのツールバー表示を設定できますか？*

	TortoiseHg のダイアログは PyGTK のアプリケーションなので、
	:file:`C:\\Program Files\\TortoiseHg\\gtk\\etc\\gtk-2.0\\gtkrc`
	にある :file:`gtkrc` ファイルを変更することで設定可能です： ::

		gtk-toolbar-icon-size = GTK_ICON_SIZE_LARGE_TOOLBAR
		# Pick an icon size from:
		# GTK_ICON_SIZE_MENU
		# GTK_ICON_SIZE_SMALL_TOOLBAR
		# GTK_ICON_SIZE_LARGE_TOOLBAR   (default)
		# GTK_ICON_SIZE_BUTTON
		# GTK_ICON_SIZE_DND
		# GTK_ICON_SIZE_DIALOG
		gtk-toolbar-style = GTK_TOOLBAR_BOTH
		# Pick a toolbar style from:
		# GTK_TOOLBAR_ICONS
		# GTK_TOOLBAR_TEXT
		# GTK_TOOLBAR_BOTH              (default)
		# GTK_TOOLBAR_BOTH_HORIZ

	これらの設定は TortoiseHg 全体に適用されます。

*マージや任意のリビジョンへの更新はどうやるの？*

	チェンジログツールからマージや特定リビジョンへの更新が行えます。
	エクスプローラの右クリックメニューの :guilabel:`ログの表示`
	から起動してください。

*'failed to import extension hgext.hgconfig...' という警告メッセージはどうすれば消えるの？*

	`issue #135 <http://bitbucket.org/tortoisehg/stable/issue/135/>`_
	を参照してください。

*TortoiseHg の shelve 拡張機能をコマンドラインから使うにはどうすればいいですか？*

	:file:`Mercurial.ini` ファイルで以下のように拡張機能を有効化してください： ::

		[extensions]
		tortoisehg.util.hgshelve=

*SSH サーバに接続できない (TortoisePlink.exe - "...cannot execute specified..." というエラーメッセージ)*

	`SSH 接続 <http://bitbucket.org/kuy/thg-ja/wiki/ssh>`_ ページを参照してください。

*hg-git 拡張機能を TortoiseHg で使うにはどうすればいいですか？*

	TortoiseHg インストーラには dulwich パッケージ含まれているため、あとは
	`hg-git <http://bitbucket.org/durin42/hg-git/>`_ をクローンして
	hg-git と bookmarks 拡張機能を有効化するだけで使えるようになります： ::

		[extensions]
		hggit = C:\extensions\hg-git\hggit
		bookmarks =

	ただし 'incoming' (受信チェンジセットの表示) コマンドは git リポジトリとの
	やりとりがうまくいかず、'outgoing' (送信チェンジセットの表示) コマンドも
	あまり有用な情報を表示しません。
	そのため実質的には単純にプッシュまたはプルを使用することになります。

*hgsubversion 拡張機能を TortoiseHg で使うにはどうすればいいですか？*

	TortoiseHg インストーラには hgsubversion が必要とする Subversion の Python
	バインディングを同梱しているため、
	`hgsubversion <http://bitbucket.org/durin42/hgsubversion/>`_
	をクローンして、それを有効化するだけで使用できます： ::

		[extensions]
		hgsubversion = C:\extensions\hgsubversion\hgsubversion

*～差分表示ツールを使うにはどうすればいいの？*

	バージョン 1.0 から TortoiseHg はよく使われている GUI 差分表示ツールを自動的に検出し、
	それらを設定画面で選択可能な状態にしてくれます。

*シェル拡張を無効にする方法は？ (アイコンオーバーレイと右クリックメニュー)*

	アイコンオーバーレイを無効化するにはトレイアイコンをクリックして表示される
	メニューにある :guilabel:`オプション` から起動できるタスクバーダイアログで
	無効にできます。右クリックメニューを非表示にするには TortoiseHg
	インストールディレクトリにある :file:`ThgShell.dll` ファイルの名前を変更して
	エクスプローラを再起動します。しかしこの方法は右クリックメニューだけでなく、
	アイコンオーバーレイも同時に無効化されます。現在、右クリックメニューのみを
	無効化する簡単な方法はありません。

*TortoiseHg はどこに設定を保存しているの？*

	TortoiseHg は2種類の設定システムを利用しています。

	1. Mercurial の設定システムで、3つのレイヤがあります
	   1. グローバル設定： :file:`%ProgramFiles%\\TortoiseHg` にある :file:`Mercurial.ini` ファイル
	   2. ユーザ設定： :file:`%UserProfile%` にある :file:`Mercurial.ini` ファイル
	   3. リポジトリ設定： :file:`{repo-root}\.hg` にある :file:`hgrc` ファイル
	2. ダイアログの位置や状態などを保存している :file:`%APPDATA%\\Tortoisehg`

	以下は Mercurial の設定システムに保存される設定項目です： ::

		[tortoisehg]
		vdiff = vdiff
		editor = gvim
		tabwidth = 4
		longsummary = True
		graphlimit = 500
		authorcolor = True
		authorcolor.steve = blue

*フォントの変更はできますか？*

	一部可能です。 TortoiseHg の各種ダイアログ (コミット、変更点の表示、
	シェルフ) のベースとなっている gtools はフォント設定が可能です： ::

		[gtools]
		# font used in changeset viewer and commit log text
		fontcomment = courier 10
		# font used for diffs in status and commit tools
		fontdiff = courier 10
		# font used in file lists in status and commit tools
		fontlist = courier 9
		# font used in command output window
		fontlog = courier 10

*GTK のテーマを変更するにはどうすればいいの？*

	テーマをダウンロードしてそれを :file:`gtk\\share\\themes` にコピーし、
	:file:`gtk\\etc\\gtk-2.0\\gtkrc` ファイルで変更してください。

*アンインストールしても大量の DLL や PYD の拡張子のファイルが残ってしまう*

	再起動してください、とアンインストーラが指示しているはずです :-)
	Windows が起動している状態では削除できないファイルもあるため、それらは再起動後
	に削除されるように設定されています。

*Subversion のリポジトリを Mercurial に変換する方法は？*

	まずコマンドラインツールの svn-win32-1.6 をインストールし、そのプログラムを
	環境変数の PATH に追加してください。次に
	`convert <http://mercurial.selenic.com/wiki/ConvertExtension>`_
	拡張機能を有効化し、 :command:`hg convert` コマンドを実行することで
	変換できます。変換について何か問題が起きたときや、質問がある場合は直接
	Mercurial のメーリングリストや IRC (irc.freenode.net の #mercurial)
	に尋ねてみてください。

	もしくは hgsubversion 拡張機能を使うという方法もあります。

	詳しくは
	`リポジトリの変換 <http://mercurial.selenic.com/wiki/RepositoryConversion>`_
	を参照してください。

*Windows の TortoiseHg はどこの Python モジュールを参照しているの？*

	TortoiseHg は Python の実行に必要な環境を DLL の形で同梱しています。
	標準ライブラリは全て :file:`C:\\Program Files\\TortoiseHg` の
	:file:`library.zip` ファイルに格納されています。

	そのため、非標準の Python モジュールに依存した Mercurial 拡張機能
	を使用するとそのモジュールが見つからないため読み込みに失敗します。
	例えば ReviewBoard 拡張機能は Python の標準ライブラリに含まれていない
	simplejson モジュールをインポートします。

	そのような拡張機能を動作させるにはちょっとした変更が必要です。
	拡張機能のソースコードを開いて非標準のモジュールインポートの前に
	そのモジュールのインストール場所を追記します： ::

		import sys
		sys.path.append(r'C:\path\to\module')

	この方法はモジュールが .egg ファイルとして配布されている場合はうまくいきません。
	指定するパスは .py または .pyc ファイルを含んでいる必要があります。

*ダイアログのぎこちないフォント描画を直すにはどうすればいいの？*

	バージョン 0.8 以降では複数の GTK+ テーマを同梱せず、デフォルトのテーマとして
	MS-Windows のみを同梱しています。その結果、MS-Windows テーマが原因で
	フォント描画がおかしくなる場合があります。これを直すには以下の設定を
	TortoiseHg の :file:`gtkrc` ファイルに追加してください： ::

		style "msw-default"
		{
		    font_name = "MS UI Gothic 9"
		}

	:file:`gtkrc` ファイルは TortoiseHg のインストールディレクトリにあります。
	:file:`C:\\Program Files\\TortoiseHg\\gtk\\etc\\gtk-2.0\\gtkrc`

.. vim: noet ts=4
