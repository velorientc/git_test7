****
導入
****

.. module:: introduction
	:synopsis: TortoiseHg の導入


TortoiseHg とは何か?
====================

TortoiseHg は `Mercurial <http://mercurial.selenic.com/wiki/>`_
分散構成管理のための GUI ツールと Windows
エクスプローラに統合するためのシェル拡張のパッケージです。

Windows では、
	TortoiseHg はエクスプローラにアイコンオーバーレイおよび
	右クリックメニューを組み込むシェル拡張と、TortoiseHg の各種ダイアログを
	起動するためのコマンドラインツール :file:`hgtk.exe` から構成されます。
	Windows 用インストーラには Mercurial やマージツール、それ以外に必要なもの
	すべてを含んでおり、これをインストールするだけすぐ使えるようになっています。

Linux では、
	TortoiseHg はコマンドラインから利用する :file:`hgtk` スクリプトと
	ファイルマネージャにアイコンオーバーレイと右クリックメニューを提供する
	Nautilus 拡張機能から構成されます。TortoiseHg を Linux
	で利用するには別途 Mercurial をインストールする必要がありますが、
	通常は TortoiseHg バイナリパッケージが Mercurial
	を依存ソフトウェアとしてリストアップするため、
	自動的にインストールされます。

TortoiseHg は (Windows のシェル拡張を除いて) 主に Python と PyGTK
で書かれています。 :file:`hgtk` スクリプトと TortoiseHg の各種ダイアログは
(例えば Mac OS など) PyGTK に対応した環境であればどこでも使うことができます。


TortoiseHg のインストール
=========================


Windows の場合
--------------

TortoiseHg には簡単にセットアップできるようにインストーラが用意されています。
ダウンロードしたインストーラをダブルクリックして起動し、後はインストーラに
表示される手順に従って完了させてください。
面倒な作業はすべてインストーラがやってくれます。

インストール後の再起動は必須なので注意してください。

.. note::
	バージョン 0.8 より古い TortoiseHg がインストールされている場合、
	インストーラは最初に古いバージョンをアンインストールするよう促します。
	アンインストールは通常のソフトウェアと同様に、
	スタートメニューからコントロールパネルを開き、
	その中の「プログラムの追加と削除」から可能です。

.. note::
	バージョン 0.8 以降の TortoiseHg がインストールされている場合、
	インストーラは新しいファイルをコピーするときに ThgTaskbar
	アプリケーションを終了します。

TortoiseHg は使いやすい MSI インストーラを採用しています。
最新バージョンは TortoiseHg の `ウェブサイト
<http://tortoisehg.bitbucket.org/download/windows.html>`_ から入手できます。
ダウンロードしたらインストーラをダブルクリックして起動し、
表示される指示に従ってインストールを進めてください。

初回インストール後はアイコンオーバーレイを有効にするために通常は
再ログインが必要です。.

アップグレートインストールの場合は、インストーラが TortoiseHg
のシェル拡張を読み込んでいるアプリケーションを検出し、
それらを終了するか、もしくは再起動するか尋ねます。
すべてのアプリケーションの終了を許可すれば、再起動・再ログインせずに
インストールを完了できます。もし他のユーザがログインしていたり、
終了できないアプリケーションがあった場合のみ
インストールを完了するために再起動が必要になります。

.. note::
	古い TortoiseHg がインストールされている場合、TortoiseHg 1.0
	のインストーラはそれをアンインストールするよう指示します。
	アンインストールはコントロールパネルの「プログラムの追加と削除」、
	またはスタートメニューから実行できます。

.. warning::
	アンインストール時、古いインストーラはホームディレクトリにある
	Mercurial.ini ファイルを削除する可能性があるため、
	事前にバックアップを取っておいてください。この不具合は新しい
	MSI インストーラでは問題ありません。

バージョン 1.0 以前のすべての TortoiseHg インストーラは InnoSetup
を使用してビルドされていました。古いインストーラは TortoiseOverlay
パッケージを独立したアプリケーションとしてインストールしていたため、
コントロールパネルの「プログラムの追加と削除」において TortoiseHg
と TortoiseOverlay の2つのアプリケーションが表示されていました
(64ビット環境では32ビット向けと64ビット向けに2つの
TortoiseOverlay パッケージ)。

TortoiseHg 1.0 の新しい MSI インストーラは TortoiseOverlay を
"マージモジュール" として収録しているため、
今後は独立したアプリケーションとして表示されることはありません。
バージョン 0.9.3 以前の TortoiseHg をアンイントールした後、
もし独立した TortoiseOverlay パッケージを使用するアプリケーション
(TortoiseCVS や TortoiseBZR) がインストールされていないのであれば、
古い TortoiseOverlay をコントロールパネルの「プログラムの追加と削除」
から安全にアンインストールすることができます。

.. note::
	TortoiseOverlay は Tortoise 系アプリケーション間で
	オーバーレイスロットを共有する仕組みを提供するパッケージです。
	Windows はオーバーレイスロットの数に限り (11から14) があるため、
	これは必要不可欠な仕組みです。TortoiseOverlay
	パッケージは TortoiseSVN 開発陣によって作成されました。

より完全な安全性を求めるのであれば2つの方法があります：

1) インストール済みの TortoiseOverlay パッケージをアンインストールせず、
   そのまま残しておく。残しておいても特に害はありません。
2) 一度すべての TortoiseOverlay パッケージをアンインストールしてから、
   Tortoise 系アプリケーションをすべて再インストールする。


言語設定
^^^^^^^^

TortoiseHg のユーザインターフェイスは様々な言語に翻訳されています。
すべての利用可能な言語はインストール済みなので、
別途言語パックをダウンロードする必要はありません。
:file:`C:\\Program Files\\TortoiseHg\\locale` に利用可能な言語が用意されています。
環境変数 ``LANGUAGE`` に言語コードを設定するだけでその言語が利用可能になります。
例えば日本語であれば ``set LANGUAGE=ja`` を設定してください。

.. note::
	``LANGUAGE`` を設定しても :guilabel:`OK` や :guilabel:`Apply` のような
	GTK+ 標準のダイアログボタンのラベルが英語のままになっている場合、TortoiseHg
	のインストーラがその言語の GTK+ 翻訳ファイルを含んでいないことを意味します。
	これはリリース時にご利用の言語の TortoiseHg 翻訳が完了していなかったためです。

Windows シェル拡張の右クリックメニューはその翻訳文字列を Windows のレジストリ
から取得しています。すでに多くの言語向けに翻訳されており、それらは
:file:`C:\\Program Files\\TortoiseHg\\i18n\\cmenu` にインストールされています。
使用したい言語のレジストリファイルをダブルクリックすると確認ダイアログが出ますので、
指示に従ってインストールしてください。


Linux または Max OS の場合
--------------------------

Debian の DEB パッケージまたは Fedora 向けの RPM パッケージは
`ダウンロード <http://tortoisehg.bitbucket.org/download/linux.html>`
ページに用意されています。

Max OS X 向けのパッケージは用意されていませんが、ソースコードから
インストールすることで hgtk スクリプトを含むすべての TortoiseHg ダイアログが
利用可能になります。詳しくは
`MacOSX <http://bitbucket.org/tortoisehg/stable/wiki/MacOSX>`_
をご覧ください。

.. note::
	TortoiseHg をソースコードからインストールしている場合、
	contrib/mergetools.rc ファイルを HGRC パスに含める必要があります。
	例えば %include を使うことで ~/.hgrc ファイルから読み込みます。

言語設定
^^^^^^^^

TortoiseHg はローカライズに
`gettext <http://docs.python.org/library/gettext.html>`_ ライブラリの
Python バインディングを利用しています。ダイアログをローカライズするには
環境変数 ``LANGUAGE`` を使用したい言語に設定するのが簡単です。

.. vim: noet ts=4
